import * as d3 from "d3";
import { useEffect, useRef } from "react";
import { useMap } from "react-leaflet";

function TestAnim() {
  const map = useMap();
  const vectorFieldRef = useRef(null);

  const vectorFieldData = [
    { lat: 13.667114, lon: 100.527289, u: -0.5, v: 0.5 },
    { lat: 13.667114, lon: 100.530618, u: 1.0, v: 0.5 },
    { lat: 13.667114, lon: 100.533947, u: -1.5, v: -2.0 },
    { lat: 13.667114, lon: 100.537277, u: -2.5, v: -0.5 },
    { lat: 13.667114, lon: 100.540606, u: 2.5, v: 3.0 },
    { lat: 13.667114, lon: 100.543935, u: 1.5, v: -1.5 },
    { lat: 13.667114, lon: 100.547265, u: -2.5, v: -1.0 },
    { lat: 13.667114, lon: 100.550594, u: 0.5, v: 1.5 },
    { lat: 13.667114, lon: 100.553923, u: 0.5, v: -1.0 },
    { lat: 13.667114, lon: 100.557253, u: 0.5, v: 1.5 },
    { lat: 13.667114, lon: 100.560582, u: 1.0, v: -0.5 },
    { lat: 13.667114, lon: 100.563911, u: -1.5, v: -1.0 },
    { lat: 13.667114, lon: 100.567241, u: -0.5, v: 0.5 },
    { lat: 13.667114, lon: 100.57057, u: 1.0, v: 0.5 },
    { lat: 13.667114, lon: 100.573899, u: -3.0, v: -3.5 },
    { lat: 13.667114, lon: 100.577229, u: 0.0, v: 3.5 },
    { lat: 13.667114, lon: 100.580558, u: 4.0, v: 0.5 },
    { lat: 13.667114, lon: 100.583887, u: -1.0, v: -1.5 },
    { lat: 13.667114, lon: 100.587217, u: -0.5, v: 1.0 },
    { lat: 13.667114, lon: 100.590546, u: 2.0, v: 1.0 },
    { lat: 13.667114, lon: 100.593875, u: -1.0, v: -2.0 },
    { lat: 13.667114, lon: 100.597205, u: -1.5, v: 0.5 },
    { lat: 13.667114, lon: 100.600534, u: 0.0, v: -0.5 },
    { lat: 13.667114, lon: 100.603863, u: 1.5, v: 2.0 },
    { lat: 13.667114, lon: 100.607193, u: 1.5, v: -0.5 },
    { lat: 13.663753, lon: 100.52063, u: -1.5, v: -1.0 },
    { lat: 13.663753, lon: 100.523959, u: -0.5, v: 0.5 },
    { lat: 13.663753, lon: 100.527289, u: -0.5, v: -1.0 },
    { lat: 13.663753, lon: 100.530618, u: -0.5, v: 0.5 },
    { lat: 13.663753, lon: 100.533947, u: 0.5, v: 0.0 },
    { lat: 13.663753, lon: 100.537277, u: 0.0, v: 0.0 },
    { lat: 13.663753, lon: 100.540606, u: 1.0, v: 1.0 },
    { lat: 13.663753, lon: 100.543935, u: 0.5, v: -0.5 },
    { lat: 13.663753, lon: 100.547265, u: -0.5, v: 0.0 },
    { lat: 13.663753, lon: 100.550594, u: 0.0, v: 0.0 },
    { lat: 13.663753, lon: 100.553923, u: 0.0, v: 0.0 },
    { lat: 13.663753, lon: 100.557253, u: 0.5, v: 0.5 },
    { lat: 13.663753, lon: 100.560582, u: -0.5, v: -1.0 },
    { lat: 13.663753, lon: 100.563911, u: 0.5, v: 1.5 },
    { lat: 13.663753, lon: 100.567241, u: 1.0, v: -0.5 },
    { lat: 13.663753, lon: 100.57057, u: -3.0, v: -2.5 },
    { lat: 13.663753, lon: 100.573899, u: -1.0, v: 1.5 },
    { lat: 13.663753, lon: 100.577229, u: 2.0, v: 0.5 },
    { lat: 13.663753, lon: 100.580558, u: -0.5, v: -1.0 },
    { lat: 13.663753, lon: 100.583887, u: -1.0, v: 0.0 },
    { lat: 13.663753, lon: 100.587217, u: 0.0, v: 0.0 },
    { lat: 13.663753, lon: 100.590546, u: 1.0, v: 1.0 },
    { lat: 13.663753, lon: 100.593875, u: 1.0, v: 0.0 },
    { lat: 13.663753, lon: 100.597205, u: 0.5, v: 0.5 },
    { lat: 13.663753, lon: 100.600534, u: -0.5, v: -1.0 },
    { lat: 13.663753, lon: 100.603863, u: -1.0, v: 0.0 },
    { lat: 13.663753, lon: 100.607193, u: 1.0, v: 1.0 },
    { lat: 13.660392, lon: 100.52063, u: 1.0, v: 0.0 },
    { lat: 13.660392, lon: 100.523959, u: 0.0, v: 0.0 },
    { lat: 13.660392, lon: 100.527289, u: -1.5, v: -1.5 },
    { lat: 13.660392, lon: 100.530618, u: -0.5, v: 1.0 },
    { lat: 13.660392, lon: 100.533947, u: 1.0, v: 0.0 },
    { lat: 13.660392, lon: 100.537277, u: -4.0, v: -4.0 },
    { lat: 13.660392, lon: 100.540606, u: -5.0, v: -1.0 },
    { lat: 13.660392, lon: 100.543935, u: 3.5, v: 4.5 },
    { lat: 13.660392, lon: 100.547265, u: 6.5, v: 2.0 },
    { lat: 13.660392, lon: 100.550594, u: 1.5, v: -0.5 },
    { lat: 13.660392, lon: 100.553923, u: -1.0, v: -0.5 },
    { lat: 13.660392, lon: 100.557253, u: 0.0, v: 0.5 },
    { lat: 13.660392, lon: 100.560582, u: -1.0, v: -1.5 },
    { lat: 13.660392, lon: 100.563911, u: -1.0, v: 0.5 },
    { lat: 13.660392, lon: 100.567241, u: -4.5, v: -5.0 },
    { lat: 13.660392, lon: 100.57057, u: 4.5, v: 9.5 },
    { lat: 13.660392, lon: 100.573899, u: 7.0, v: -2.5 },
    { lat: 13.660392, lon: 100.577229, u: -3.0, v: -0.5 },
    { lat: 13.660392, lon: 100.580558, u: -2.5, v: -2.0 },
    { lat: 13.660392, lon: 100.583887, u: -1.0, v: 1.0 },
    { lat: 13.660392, lon: 100.587217, u: 0.0, v: -1.0 },
    { lat: 13.660392, lon: 100.590546, u: 2.0, v: 3.0 },
    { lat: 13.660392, lon: 100.593875, u: 0.0, v: -3.0 },
    { lat: 13.660392, lon: 100.597205, u: -3.0, v: 0.0 },
    { lat: 13.660392, lon: 100.600534, u: 0.0, v: 0.0 },
    { lat: 13.660392, lon: 100.603863, u: 0.5, v: 0.5 },
    { lat: 13.660392, lon: 100.607193, u: 0.0, v: -0.5 },
    { lat: 13.65703, lon: 100.52063, u: -1.0, v: -0.5 },
    { lat: 13.65703, lon: 100.523959, u: -0.5, v: 0.0 },
    { lat: 13.65703, lon: 100.527289, u: -0.5, v: -0.5 },
    { lat: 13.65703, lon: 100.530618, u: 1.5, v: 2.0 },
    { lat: 13.65703, lon: 100.533947, u: 0.0, v: -2.0 },
    { lat: 13.65703, lon: 100.537277, u: -1.0, v: 1.0 },
    { lat: 13.65703, lon: 100.540606, u: 3.0, v: 2.0 },
    { lat: 13.65703, lon: 100.543935, u: -1.0, v: -3.0 },
    { lat: 13.65703, lon: 100.547265, u: -3.0, v: 0.0 },
    { lat: 13.65703, lon: 100.550594, u: 0.0, v: 0.0 },
    { lat: 13.65703, lon: 100.553923, u: 1.5, v: 1.5 },
    { lat: 13.65703, lon: 100.557253, u: 4.5, v: 3.0 },
    { lat: 13.65703, lon: 100.560582, u: -0.5, v: -3.5 },
    { lat: 13.65703, lon: 100.563911, u: -2.5, v: 1.0 },
    { lat: 13.65703, lon: 100.567241, u: 1.5, v: 0.5 },
    { lat: 13.65703, lon: 100.57057, u: 2.0, v: 1.5 },
    { lat: 13.65703, lon: 100.573899, u: 0.0, v: -1.5 },
    { lat: 13.65703, lon: 100.577229, u: -3.0, v: -1.5 },
    { lat: 13.65703, lon: 100.580558, u: -0.5, v: 1.0 },
    { lat: 13.65703, lon: 100.583887, u: 0.0, v: -1.0 },
    { lat: 13.65703, lon: 100.587217, u: -1.0, v: 0.0 },
    { lat: 13.65703, lon: 100.590546, u: 1.0, v: 1.0 },
    { lat: 13.65703, lon: 100.593875, u: 0.0, v: -1.0 },
    { lat: 13.65703, lon: 100.597205, u: -1.5, v: -0.5 },
    { lat: 13.65703, lon: 100.600534, u: 1.5, v: 2.0 },
    { lat: 13.65703, lon: 100.603863, u: 1.5, v: -0.5 },
    { lat: 13.65703, lon: 100.607193, u: -0.5, v: 0.0 },
    { lat: 13.653669, lon: 100.52063, u: -1.5, v: -1.5 },
    { lat: 13.653669, lon: 100.523959, u: -1.5, v: 0.0 },
    { lat: 13.653669, lon: 100.527289, u: 0.0, v: 0.0 },
    { lat: 13.653669, lon: 100.530618, u: -1.0, v: -1.0 },
    { lat: 13.653669, lon: 100.533947, u: 0.0, v: 1.0 },
    { lat: 13.653669, lon: 100.537277, u: 2.0, v: 1.0 },
    { lat: 13.653669, lon: 100.540606, u: -0.5, v: -1.5 },
    { lat: 13.653669, lon: 100.543935, u: -1.5, v: 0.0 },
    { lat: 13.653669, lon: 100.547265, u: 5.5, v: 5.5 },
    { lat: 13.653669, lon: 100.550594, u: 3.0, v: -2.5 },
    { lat: 13.653669, lon: 100.553923, u: -5.5, v: -3.0 },
    { lat: 13.653669, lon: 100.557253, u: -0.5, v: 2.5 },
    { lat: 13.653669, lon: 100.560582, u: 2.0, v: -0.5 },
    { lat: 13.653669, lon: 100.563911, u: -1.5, v: -1.0 },
    { lat: 13.653669, lon: 100.567241, u: 2.5, v: 3.5 },
    { lat: 13.653669, lon: 100.57057, u: 0.5, v: -3.0 },
    { lat: 13.653669, lon: 100.573899, u: -3.0, v: 0.0 },
    { lat: 13.653669, lon: 100.577229, u: 0.0, v: 0.0 },
    { lat: 13.653669, lon: 100.580558, u: -0.5, v: -0.5 },
    { lat: 13.653669, lon: 100.583887, u: 0.5, v: 1.0 },
    { lat: 13.653669, lon: 100.587217, u: -0.5, v: -1.5 },
    { lat: 13.653669, lon: 100.590546, u: -1.5, v: 0.0 },
    { lat: 13.653669, lon: 100.593875, u: 0.0, v: 0.0 },
    { lat: 13.653669, lon: 100.597205, u: 1.0, v: 1.0 },
    { lat: 13.653669, lon: 100.600534, u: 0.0, v: -1.0 },
    { lat: 13.653669, lon: 100.603863, u: 0.5, v: 1.5 },
    { lat: 13.653669, lon: 100.607193, u: 0.0, v: -1.5 },
    { lat: 13.650308, lon: 100.52063, u: -1.5, v: 0.0 },
    { lat: 13.650308, lon: 100.523959, u: 0.0, v: 0.0 },
    { lat: 13.650308, lon: 100.527289, u: 0.0, v: 0.0 },
    { lat: 13.650308, lon: 100.530618, u: -4.0, v: -4.0 },
    { lat: 13.650308, lon: 100.533947, u: 0.0, v: 4.0 },
    { lat: 13.650308, lon: 100.537277, u: 3.5, v: -0.5 },
    { lat: 13.650308, lon: 100.540606, u: 0.0, v: 0.5 },
    { lat: 13.650308, lon: 100.543935, u: 3.0, v: 2.5 },
    { lat: 13.650308, lon: 100.547265, u: 2.0, v: -0.5 },
    { lat: 13.650308, lon: 100.550594, u: -2.0, v: -1.5 },
    { lat: 13.650308, lon: 100.553923, u: -1.5, v: 0.0 },
    { lat: 13.650308, lon: 100.557253, u: 1.0, v: 1.0 },
    { lat: 13.650308, lon: 100.560582, u: 3.0, v: 2.0 },
    { lat: 13.650308, lon: 100.563911, u: 0.0, v: -2.0 },
    { lat: 13.650308, lon: 100.567241, u: -2.5, v: -0.5 },
    { lat: 13.650308, lon: 100.57057, u: 1.0, v: 1.5 },
    { lat: 13.650308, lon: 100.573899, u: 0.0, v: -1.5 },
    { lat: 13.650308, lon: 100.577229, u: -2.0, v: -0.5 },
    { lat: 13.650308, lon: 100.580558, u: -0.5, v: 0.0 },
    { lat: 13.650308, lon: 100.583887, u: 1.0, v: 1.0 },
    { lat: 13.650308, lon: 100.587217, u: -0.5, v: -1.5 },
    { lat: 13.650308, lon: 100.590546, u: 4.0, v: 5.5 },
    { lat: 13.650308, lon: 100.593875, u: 11.0, v: 5.5 },
    { lat: 13.650308, lon: 100.597205, u: -5.5, v: -11.0 },
    { lat: 13.650308, lon: 100.600534, u: -10.5, v: 0.5 },
    { lat: 13.650308, lon: 100.603863, u: -0.5, v: -1.0 },
    { lat: 13.650308, lon: 100.607193, u: 0.0, v: 1.0 },
    { lat: 13.646947, lon: 100.52063, u: 0.5, v: -0.5 },
    { lat: 13.646947, lon: 100.523959, u: 0.5, v: 1.0 },
    { lat: 13.646947, lon: 100.527289, u: 2.5, v: 1.5 },
    { lat: 13.646947, lon: 100.530618, u: -0.5, v: -2.0 },
    { lat: 13.646947, lon: 100.533947, u: 1.0, v: 3.0 },
    { lat: 13.646947, lon: 100.537277, u: 0.0, v: -3.0 },
    { lat: 13.646947, lon: 100.540606, u: -3.5, v: -0.5 },
    { lat: 13.646947, lon: 100.543935, u: 0.0, v: 0.5 },
    { lat: 13.646947, lon: 100.547265, u: 0.5, v: 0.0 },
    { lat: 13.646947, lon: 100.550594, u: 4.5, v: 4.5 },
    { lat: 13.646947, lon: 100.553923, u: 1.5, v: -3.0 },
    { lat: 13.646947, lon: 100.557253, u: -4.5, v: -1.5 },
    { lat: 13.646947, lon: 100.560582, u: -1.5, v: 0.0 },
    { lat: 13.646947, lon: 100.563911, u: 0.5, v: 0.5 },
    { lat: 13.646947, lon: 100.567241, u: 2.0, v: 1.5 },
    { lat: 13.646947, lon: 100.57057, u: 3.0, v: 1.5 },
    { lat: 13.646947, lon: 100.573899, u: -2.0, v: -3.5 },
    { lat: 13.646947, lon: 100.577229, u: -3.5, v: 0.0 },
    { lat: 13.646947, lon: 100.580558, u: 0.0, v: 0.0 },
    { lat: 13.646947, lon: 100.583887, u: 1.0, v: 1.0 },
    { lat: 13.646947, lon: 100.587217, u: -0.5, v: -1.5 },
    { lat: 13.646947, lon: 100.590546, u: -1.5, v: 0.0 },
    { lat: 13.646947, lon: 100.593875, u: 0.0, v: 0.0 },
    { lat: 13.646947, lon: 100.597205, u: 1.5, v: 1.5 },
    { lat: 13.646947, lon: 100.600534, u: 0.0, v: -1.5 },
    { lat: 13.646947, lon: 100.603863, u: -1.5, v: 0.0 },
    { lat: 13.646947, lon: 100.607193, u: 0.0, v: 0.0 },
    { lat: 13.643586, lon: 100.52063, u: 0.5, v: 0.5 },
    { lat: 13.643586, lon: 100.523959, u: 0.0, v: -0.5 },
    { lat: 13.643586, lon: 100.527289, u: 0.5, v: 1.0 },
    { lat: 13.643586, lon: 100.530618, u: 0.0, v: -1.0 },
    { lat: 13.643586, lon: 100.533947, u: 0.5, v: 1.5 },
    { lat: 13.643586, lon: 100.537277, u: 0.0, v: -1.5 },
    { lat: 13.643586, lon: 100.540606, u: -1.5, v: 0.0 },
    { lat: 13.643586, lon: 100.543935, u: 0.5, v: 0.5 },
    { lat: 13.643586, lon: 100.547265, u: 1.0, v: 0.5 },
    { lat: 13.643586, lon: 100.550594, u: 0.5, v: 0.0 },
    { lat: 13.643586, lon: 100.553923, u: 0.0, v: 0.0 },
    { lat: 13.643586, lon: 100.557253, u: 0.0, v: 0.0 },
    { lat: 13.643586, lon: 100.560582, u: 0.5, v: 0.5 },
    { lat: 13.643586, lon: 100.563911, u: 1.0, v: 0.5 },
    { lat: 13.643586, lon: 100.567241, u: 0.0, v: -0.5 },
    { lat: 13.643586, lon: 100.57057, u: -0.5, v: 0.0 },
    { lat: 13.643586, lon: 100.573899, u: -1.0, v: -1.0 },
    { lat: 13.643586, lon: 100.577229, u: 0.5, v: 1.5 },
    { lat: 13.643586, lon: 100.580558, u: 1.5, v: 0.0 },
    { lat: 13.643586, lon: 100.583887, u: -1.5, v: -1.5 },
    { lat: 13.643586, lon: 100.587217, u: -1.0, v: 0.5 },
    { lat: 13.643586, lon: 100.590546, u: 1.5, v: 1.0 },
    { lat: 13.643586, lon: 100.593875, u: 0.5, v: -0.5 },
    { lat: 13.643586, lon: 100.597205, u: 0.0, v: 0.5 },
    { lat: 13.643586, lon: 100.600534, u: -1.5, v: -2.0 },
    { lat: 13.643586, lon: 100.603863, u: -2.0, v: 0.0 },
    { lat: 13.643586, lon: 100.607193, u: -0.5, v: -0.5 },
    { lat: 13.640224, lon: 100.52063, u: 0.0, v: 0.5 },
    { lat: 13.640224, lon: 100.523959, u: 0.5, v: 0.0 },
    { lat: 13.640224, lon: 100.527289, u: 2.0, v: 2.0 },
    { lat: 13.640224, lon: 100.530618, u: 0.5, v: -1.5 },
    { lat: 13.640224, lon: 100.533947, u: -2.0, v: -0.5 },
    { lat: 13.640224, lon: 100.537277, u: 0.0, v: 0.5 },
    { lat: 13.640224, lon: 100.540606, u: 0.0, v: -0.5 },
    { lat: 13.640224, lon: 100.543935, u: 0.0, v: 0.5 },
    { lat: 13.640224, lon: 100.547265, u: 1.0, v: 0.5 },
    { lat: 13.640224, lon: 100.550594, u: 2.5, v: 2.0 },
    { lat: 13.640224, lon: 100.553923, u: -1.0, v: -3.0 },
    { lat: 13.640224, lon: 100.557253, u: -2.5, v: 0.5 },
    { lat: 13.640224, lon: 100.560582, u: 2.5, v: 2.0 },
    { lat: 13.640224, lon: 100.563911, u: 1.5, v: -0.5 },
    { lat: 13.640224, lon: 100.567241, u: -0.5, v: 0.0 },
    { lat: 13.640224, lon: 100.57057, u: 0.0, v: 0.0 },
    { lat: 13.640224, lon: 100.573899, u: -1.5, v: -1.5 },
    { lat: 13.640224, lon: 100.577229, u: -2.0, v: -0.5 },
    { lat: 13.640224, lon: 100.580558, u: 1.5, v: 2.0 },
    { lat: 13.640224, lon: 100.583887, u: 0.5, v: -1.5 },
    { lat: 13.640224, lon: 100.587217, u: 0.0, v: 1.5 },
    { lat: 13.640224, lon: 100.590546, u: 2.5, v: 1.0 },
    { lat: 13.640224, lon: 100.593875, u: -2.5, v: -3.5 },
    { lat: 13.640224, lon: 100.597205, u: -2.5, v: 1.0 },
    { lat: 13.640224, lon: 100.600534, u: 3.0, v: 2.0 },
    { lat: 13.640224, lon: 100.603863, u: 0.5, v: -1.5 },
    { lat: 13.640224, lon: 100.607193, u: -3.0, v: -1.5 },
    { lat: 13.636863, lon: 100.52063, u: -1.0, v: 0.5 },
    { lat: 13.636863, lon: 100.523959, u: 2.5, v: 2.0 },
    { lat: 13.636863, lon: 100.527289, u: 1.5, v: -0.5 },
    { lat: 13.636863, lon: 100.530618, u: -0.5, v: 0.0 },
    { lat: 13.636863, lon: 100.533947, u: -5.5, v: -5.5 },
    { lat: 13.636863, lon: 100.537277, u: 1.5, v: 7.0 },
    { lat: 13.636863, lon: 100.540606, u: 6.0, v: -1.0 },
    { lat: 13.636863, lon: 100.543935, u: -1.5, v: -0.5 },
    { lat: 13.636863, lon: 100.547265, u: -1.5, v: -1.0 },
    { lat: 13.636863, lon: 100.550594, u: -1.5, v: -0.5 },
    { lat: 13.636863, lon: 100.553923, u: 0.0, v: 0.5 },
    { lat: 13.636863, lon: 100.557253, u: 0.0, v: -0.5 },
    { lat: 13.636863, lon: 100.560582, u: 0.0, v: 0.5 },
    { lat: 13.636863, lon: 100.563911, u: 1.5, v: 1.0 },
    { lat: 13.636863, lon: 100.567241, u: -0.5, v: -1.5 },
    { lat: 13.636863, lon: 100.57057, u: -1.5, v: 0.0 },
    { lat: 13.636863, lon: 100.573899, u: 0.0, v: 0.0 },
    { lat: 13.636863, lon: 100.577229, u: 0.0, v: 0.0 },
    { lat: 13.636863, lon: 100.580558, u: 1.5, v: 1.5 },
    { lat: 13.636863, lon: 100.583887, u: 1.0, v: -0.5 },
    { lat: 13.636863, lon: 100.587217, u: -0.5, v: 0.0 },
    { lat: 13.636863, lon: 100.590546, u: -1.5, v: -1.5 },
    { lat: 13.636863, lon: 100.593875, u: -0.5, v: 1.0 },
    { lat: 13.636863, lon: 100.597205, u: 1.5, v: 0.5 },
    { lat: 13.636863, lon: 100.600534, u: 0.0, v: -0.5 },
    { lat: 13.636863, lon: 100.603863, u: -1.5, v: -1.0 },
    { lat: 13.636863, lon: 100.607193, u: 0.0, v: 1.0 },
    { lat: 13.633502, lon: 100.52063, u: 2.0, v: 1.0 },
    { lat: 13.633502, lon: 100.523959, u: 1.0, v: 0.0 },
    { lat: 13.633502, lon: 100.527289, u: -0.5, v: -0.5 },
    { lat: 13.633502, lon: 100.530618, u: 2.0, v: 2.5 },
    { lat: 13.633502, lon: 100.533947, u: -1.0, v: -3.5 },
    { lat: 13.633502, lon: 100.537277, u: -1.0, v: 2.5 },
    { lat: 13.633502, lon: 100.540606, u: 1.5, v: -1.0 },
    { lat: 13.633502, lon: 100.543935, u: -1.0, v: 0.0 },
    { lat: 13.633502, lon: 100.547265, u: -1.0, v: -1.0 },
    { lat: 13.633502, lon: 100.550594, u: -1.0, v: 0.0 },
    { lat: 13.633502, lon: 100.553923, u: -0.5, v: -0.5 },
    { lat: 13.633502, lon: 100.557253, u: 0.5, v: 1.0 },
    { lat: 13.633502, lon: 100.560582, u: 1.5, v: 0.5 },
    { lat: 13.633502, lon: 100.563911, u: -1.0, v: -1.5 },
    { lat: 13.633502, lon: 100.567241, u: -1.0, v: 0.5 },
    { lat: 13.633502, lon: 100.57057, u: 1.0, v: 0.5 },
    { lat: 13.633502, lon: 100.573899, u: 1.0, v: 0.5 },
    { lat: 13.633502, lon: 100.577229, u: 0.0, v: -0.5 },
    { lat: 13.633502, lon: 100.580558, u: -1.5, v: -1.0 },
    { lat: 13.633502, lon: 100.583887, u: -1.0, v: 0.0 },
    { lat: 13.633502, lon: 100.587217, u: 1.0, v: 1.0 },
    { lat: 13.633502, lon: 100.590546, u: 0.5, v: -0.5 },
    { lat: 13.633502, lon: 100.593875, u: -1.5, v: -1.0 },
    { lat: 13.633502, lon: 100.597205, u: -0.5, v: 0.5 },
    { lat: 13.633502, lon: 100.600534, u: 0.0, v: -0.5 },
    { lat: 13.633502, lon: 100.603863, u: 0.5, v: 1.0 },
    { lat: 13.633502, lon: 100.607193, u: 0.5, v: -0.5 },
    { lat: 13.630141, lon: 100.52063, u: -1.0, v: -0.5 },
    { lat: 13.630141, lon: 100.523959, u: -0.5, v: 0.0 },
    { lat: 13.630141, lon: 100.527289, u: 2.5, v: 2.5 },
    { lat: 13.630141, lon: 100.530618, u: 3.0, v: 0.5 },
    { lat: 13.630141, lon: 100.533947, u: -1.0, v: -1.5 },
    { lat: 13.630141, lon: 100.537277, u: -4.0, v: -2.5 },
    { lat: 13.630141, lon: 100.540606, u: 1.0, v: 3.5 },
    { lat: 13.630141, lon: 100.543935, u: 2.0, v: -1.5 },
    { lat: 13.630141, lon: 100.547265, u: -1.5, v: 0.0 },
    { lat: 13.630141, lon: 100.550594, u: 0.0, v: 0.0 },
    { lat: 13.630141, lon: 100.553923, u: 0.0, v: 0.0 },
    { lat: 13.630141, lon: 100.557253, u: -0.5, v: -0.5 },
    { lat: 13.630141, lon: 100.560582, u: 1.0, v: 1.5 },
    { lat: 13.630141, lon: 100.563911, u: 0.0, v: -1.5 },
    { lat: 13.630141, lon: 100.567241, u: -1.5, v: 0.0 },
    { lat: 13.630141, lon: 100.57057, u: 0.5, v: 0.5 },
    { lat: 13.630141, lon: 100.573899, u: 0.0, v: -0.5 },
    { lat: 13.630141, lon: 100.577229, u: 0.0, v: 0.5 },
    { lat: 13.630141, lon: 100.580558, u: -0.5, v: -1.0 },
    { lat: 13.630141, lon: 100.583887, u: -1.0, v: 0.0 },
    { lat: 13.630141, lon: 100.587217, u: 0.0, v: 0.0 },
    { lat: 13.630141, lon: 100.590546, u: 1.0, v: 1.0 },
    { lat: 13.630141, lon: 100.593875, u: 0.0, v: -1.0 },
    { lat: 13.630141, lon: 100.597205, u: -1.0, v: 0.0 },
    { lat: 13.630141, lon: 100.600534, u: 3.0, v: 3.0 },
    { lat: 13.630141, lon: 100.603863, u: 0.0, v: -3.0 },
    { lat: 13.630141, lon: 100.607193, u: -3.5, v: -0.5 },
    { lat: 13.626779, lon: 100.52063, u: 0.5, v: 1.0 },
    { lat: 13.626779, lon: 100.523959, u: 2.0, v: 1.0 },
    { lat: 13.626779, lon: 100.527289, u: -0.5, v: -1.5 },
    { lat: 13.626779, lon: 100.530618, u: -1.0, v: 0.5 },
    { lat: 13.626779, lon: 100.533947, u: 1.5, v: 1.0 },
    { lat: 13.626779, lon: 100.537277, u: 0.5, v: -0.5 },
    { lat: 13.626779, lon: 100.540606, u: -0.5, v: 0.0 },
    { lat: 13.626779, lon: 100.543935, u: 1.0, v: 1.0 },
    { lat: 13.626779, lon: 100.547265, u: 0.0, v: -1.0 },
    { lat: 13.626779, lon: 100.550594, u: -1.0, v: 0.0 },
    { lat: 13.626779, lon: 100.553923, u: -0.5, v: -0.5 },
    { lat: 13.626779, lon: 100.557253, u: 1.0, v: 1.5 },
    { lat: 13.626779, lon: 100.560582, u: 0.0, v: -1.5 },
    { lat: 13.626779, lon: 100.563911, u: 0.0, v: 1.5 },
    { lat: 13.626779, lon: 100.567241, u: 3.0, v: 1.5 },
    { lat: 13.626779, lon: 100.57057, u: 1.5, v: 0.0 },
    { lat: 13.626779, lon: 100.573899, u: -0.5, v: -0.5 },
    { lat: 13.626779, lon: 100.577229, u: -3.0, v: -2.5 },
    { lat: 13.626779, lon: 100.580558, u: -3.0, v: -0.5 },
    { lat: 13.626779, lon: 100.583887, u: -0.5, v: 0.0 },
    { lat: 13.626779, lon: 100.587217, u: 0.0, v: 0.0 },
    { lat: 13.626779, lon: 100.590546, u: 0.0, v: 0.0 },
    { lat: 13.626779, lon: 100.593875, u: 1.0, v: 1.0 },
    { lat: 13.626779, lon: 100.597205, u: 1.0, v: 0.0 },
    { lat: 13.626779, lon: 100.600534, u: 0.0, v: 0.0 },
    { lat: 13.626779, lon: 100.603863, u: -0.5, v: -0.5 },
    { lat: 13.626779, lon: 100.607193, u: -0.5, v: 0.0 },
    { lat: 13.623418, lon: 100.52063, u: 0.0, v: 0.0 },
    { lat: 13.623418, lon: 100.523959, u: -0.5, v: -0.5 },
    { lat: 13.623418, lon: 100.527289, u: 0.0, v: 0.5 },
    { lat: 13.623418, lon: 100.530618, u: 1.5, v: 1.0 },
    { lat: 13.623418, lon: 100.533947, u: 1.0, v: 0.0 },
    { lat: 13.623418, lon: 100.537277, u: -1.0, v: -1.0 },
    { lat: 13.623418, lon: 100.540606, u: 0.0, v: 1.0 },
    { lat: 13.623418, lon: 100.543935, u: -1.0, v: -2.0 },
    { lat: 13.623418, lon: 100.547265, u: -0.5, v: 1.5 },
    { lat: 13.623418, lon: 100.550594, u: 2.5, v: 1.0 },
    { lat: 13.623418, lon: 100.553923, u: 1.0, v: 0.0 },
    { lat: 13.623418, lon: 100.557253, u: -1.0, v: -1.0 },
    { lat: 13.623418, lon: 100.560582, u: -0.5, v: 0.5 },
    { lat: 13.623418, lon: 100.563911, u: 0.5, v: 0.0 },
    { lat: 13.623418, lon: 100.567241, u: -1.5, v: -1.5 },
    { lat: 13.623418, lon: 100.57057, u: 0.5, v: 2.0 },
    { lat: 13.623418, lon: 100.573899, u: 1.5, v: -0.5 },
    { lat: 13.623418, lon: 100.577229, u: -0.5, v: 0.0 },
    { lat: 13.623418, lon: 100.580558, u: -1.5, v: -1.5 },
    { lat: 13.623418, lon: 100.583887, u: 0.0, v: 1.5 },
    { lat: 13.623418, lon: 100.587217, u: 1.5, v: 0.0 },
    { lat: 13.623418, lon: 100.590546, u: -1.5, v: -1.5 },
    { lat: 13.623418, lon: 100.593875, u: -1.5, v: 0.0 },
    { lat: 13.623418, lon: 100.597205, u: -0.5, v: -0.5 },
    { lat: 13.623418, lon: 100.600534, u: 0.0, v: 0.5 },
    { lat: 13.623418, lon: 100.603863, u: 1.0, v: 0.5 },
  ];

  useEffect(() => {
    if (!vectorFieldData || !map) return;

    const svg = d3.select(vectorFieldRef.current);
    const g = svg.append("g");

    const update = () => {
      const bounds = map.getBounds();
      const topLeft = map.latLngToLayerPoint(bounds.getNorthWest());
      const bottomRight = map.latLngToLayerPoint(bounds.getSouthEast());

      svg
        .style("width", `${bottomRight.x - topLeft.x}px`)
        .style("height", `${bottomRight.y - topLeft.y}px`)
        .style("left", `${topLeft.x}px`)
        .style("top", `${topLeft.y}px`);

      g.attr("transform", `translate(${-topLeft.x}, ${-topLeft.y})`);

      const lines = g.selectAll("line").data(vectorFieldData);

      lines
        .enter()
        .append("line")
        .attr("x1", (d) => map.latLngToLayerPoint([d.lat, d.lon]).x)
        .attr("y1", (d) => map.latLngToLayerPoint([d.lat, d.lon]).y)
        .attr("x2", (d) => map.latLngToLayerPoint([d.lat + d.u, d.lon + d.v]).x)
        .attr("y2", (d) => map.latLngToLayerPoint([d.lat + d.u, d.lon + d.v]).y)
        .style("stroke", "blue")
        .style("stroke-width", 2);

      lines.exit().remove();
    };

    map.on("moveend", update);
    update();

    return () => {
      map.off("moveend", update);
    };
  }, [vectorFieldData, map]);

  return (
    <svg
      ref={vectorFieldRef}
      style={{ position: "absolute", top: 0, left: 0 }}
    />
  );
}

export default TestAnim;
